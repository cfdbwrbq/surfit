<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
<title>surfit documentation</title>
<link href="surfit.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="examples.html">Examples</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">surfit</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">src</a></div>
<h1>datafile.h</h1><div class="fragment"><pre class="fragment">00001 
00002 <span class="comment">/*------------------------------------------------------------------------------</span>
00003 <span class="comment"> *      $Id$</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> *      Copyright (c) 2002-2004 by M. V. Dmitrievsky and V. N. Kutrunov</span>
00006 <span class="comment"> *      See COPYING file for copying and redistribution conditions.</span>
00007 <span class="comment"> *</span>
00008 <span class="comment"> *      This program is free software; you can redistribute it and/or modify</span>
00009 <span class="comment"> *      it under the terms of the GNU General Public License as published by</span>
00010 <span class="comment"> *      the Free Software Foundation; version 2 of the License.</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> *      This program is distributed in the hope that it will be useful,</span>
00013 <span class="comment"> *      but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00014 <span class="comment"> *      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00015 <span class="comment"> *      GNU General Public License for more details.</span>
00016 <span class="comment"> *</span>
00017 <span class="comment"> *      Contact info: surfit.sourceforge.net</span>
00018 <span class="comment"> *----------------------------------------------------------------------------*/</span>
00019 
00020 <span class="preprocessor">#ifndef __surfit__datafile__</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define __surfit__datafile__</span>
00022 <span class="preprocessor"></span>
00023 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00024 <span class="preprocessor">#include "real.h"</span>
00025 
00026 <span class="keyword">namespace </span>surfit {
00027 
00028 <span class="preprocessor">#define BUFFER 2048</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define TAG_WORD_SIZE 512</span>
00030 <span class="preprocessor"></span>
00031 <span class="preprocessor">#define DF_MODE_WRITE      0</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define DF_MODE_READ       1</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define DF_IOMODE_BINARY   0</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define DF_IOMODE_TEXT     1</span>
00035 <span class="preprocessor"></span>
<a name="l00042"></a><a class="code" href="classsurfit_1_1datafile.html">00042</a> <span class="keyword">class </span>SURFIT_EXPORT datafile {
00043 <span class="keyword">public</span>:
00049         datafile(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename, <span class="keywordtype">int</span> mode, <span class="keywordtype">int</span> iomode);
00050 
00052         ~datafile();
00053 
00057         <span class="keywordtype">bool</span> writeTag(<span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00058 
00060         <span class="keywordtype">bool</span> writeEndTag();
00062         <span class="keywordtype">bool</span> writeEof();
00063                 
00065         <span class="keywordtype">bool</span> writeString(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00066         
00071         <span class="keywordtype">bool</span> writeInt(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> <span class="keywordtype">int</span> &amp; i);
00072         
00077         <span class="keywordtype">bool</span> writeReal(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> REAL &amp; d);
00078         
00083         <span class="keywordtype">bool</span> writeChar(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> <span class="keywordtype">char</span> * c);
00084         
00090         <span class="keywordtype">bool</span> writeRealArray(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> REAL * ptr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
00091         
00097         <span class="keywordtype">bool</span> writeBoolArray(<span class="keyword">const</span> <span class="keywordtype">char</span> * name, <span class="keyword">const</span> <span class="keywordtype">bool</span> * ptr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size);
00098         
00100         <span class="keywordtype">bool</span> readWord();
00101         
00103         <span class="keywordtype">bool</span> readBool(<span class="keywordtype">bool</span> &amp; b);
00104 
00106         <span class="keywordtype">bool</span> readByte(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp; c);
00107         
00109         <span class="keywordtype">bool</span> readInt(<span class="keywordtype">int</span> &amp; i);
00110         
00112         <span class="keywordtype">bool</span> readReal(REAL &amp; d);
00113 
00118         <span class="keywordtype">bool</span> readRealArray(REAL *&amp; begin, REAL *&amp; end);
00119 
00124         <span class="keywordtype">bool</span> readBoolArray(<span class="keywordtype">bool</span> *&amp; begin, <span class="keywordtype">bool</span> *&amp; end);
00125         
00127         <span class="keywordtype">bool</span> condition() <span class="keyword">const</span>;
00128 
00130         <span class="keywordtype">bool</span> findTag(<span class="keyword">const</span> <span class="keywordtype">char</span> * tagname);
00131 
00133         <span class="keywordtype">bool</span> findTagEof();
00134 
00136         <span class="keywordtype">bool</span> skipTagName();
00137 
00139         <span class="keywordtype">bool</span> isWord(<span class="keyword">const</span> <span class="keywordtype">char</span> * testword) <span class="keyword">const</span>;
00140         
00142         <span class="keywordtype">bool</span> skip(<span class="keywordtype">bool</span> print_name, <span class="keywordtype">char</span> * name = NULL);
00143 
00145         <span class="keywordtype">bool</span> skipToEndTag();
00146         
00148         <span class="keywordtype">bool</span> skipByte();
00149 
00151         <span class="keywordtype">bool</span> skipBool();
00152 
00154         <span class="keywordtype">bool</span> skipInt(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00155 
00157         <span class="keywordtype">bool</span> skipReal(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00158 
00160         <span class="keywordtype">bool</span> skipChar(<span class="keywordtype">bool</span> print_name = <span class="keyword">false</span>, <span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>, <span class="keywordtype">char</span> * name = NULL);
00161 
00163         <span class="keywordtype">bool</span> skipArray(<span class="keywordtype">bool</span> skip_type = <span class="keyword">true</span>);
00164 
00166         <span class="keywordtype">bool</span> skipByteArray(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00167         
00169         <span class="keywordtype">bool</span> skipBoolArray(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00170         
00172         <span class="keywordtype">bool</span> skipIntArray(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00173         
00175         <span class="keywordtype">bool</span> skipRealArray(<span class="keywordtype">bool</span> skip_name = <span class="keyword">true</span>);
00176                         
00178         <span class="keyword">const</span> <span class="keywordtype">char</span> * readNextTag();
00179 
00181         <span class="keyword">const</span> <span class="keywordtype">char</span> * getWord() <span class="keyword">const</span>;
00182 
00184         <span class="keywordtype">void</span> <a class="code" href="group__tcl__file.html#ga0">file_info</a>();
00186         <span class="keywordtype">void</span> file_info_fill(<span class="keywordtype">char</span> **&amp; contents);
00187 
00188         <span class="comment">//</span>
00189         <span class="comment">// comfortable reading section</span>
00190         <span class="comment">//</span>
00191 
00193         <span class="keywordtype">bool</span> isVariableType(<span class="keyword">const</span> <span class="keywordtype">char</span> * type_name, <span class="keywordtype">bool</span> &amp; read_ok);
00194         
00196         <span class="keywordtype">bool</span> ReadChar(<span class="keyword">const</span> <span class="keywordtype">char</span> * variable_name, <span class="keywordtype">char</span> *&amp; result, <span class="keywordtype">bool</span> &amp; read_ok);
00197 
00199         <span class="keywordtype">bool</span> ReadInt(<span class="keyword">const</span> <span class="keywordtype">char</span> * variable_name, <span class="keywordtype">int</span> &amp; result, <span class="keywordtype">bool</span> &amp; read_ok);
00200         
00202         <span class="keywordtype">bool</span> ReadReal(<span class="keyword">const</span> <span class="keywordtype">char</span> * variable_name, REAL &amp; result, <span class="keywordtype">bool</span> &amp; read_ok);
00203         
00205         <span class="keywordtype">bool</span> ReadRealArray(<span class="keyword">const</span> <span class="keywordtype">char</span> * variable_name, REAL *&amp; begin, REAL *&amp; end, <span class="keywordtype">bool</span> &amp; read_ok);
00206 
00207 <span class="keyword">public</span>:
00208 
00209         <span class="comment">//</span>
00210         <span class="comment">// internal writing</span>
00211         <span class="comment">//</span>
00212 
00214         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> writeBinaryString(<span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00216         <span class="keywordtype">bool</span> writeString(<span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00218         <span class="keywordtype">bool</span> writeTextString(<span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00220         <span class="keywordtype">bool</span> writeHeader();
00222         <span class="keywordtype">bool</span> checkHeader(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename);
00223         
00224         <span class="comment">//</span>
00225         <span class="comment">// internal reading</span>
00226         <span class="comment">//</span>
00227         
00229         <span class="keywordtype">bool</span> readTagName(<span class="keywordtype">char</span> * string);
00231         <span class="keywordtype">bool</span> byteswaptest();
00233         <span class="keywordtype">bool</span> ungetString(<span class="keyword">const</span> <span class="keywordtype">char</span> * string);
00234 
00236         <span class="keywordtype">bool</span> skipBytes(<span class="keywordtype">long</span> how_much);
00238         <span class="keywordtype">void</span> skipHeader(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename);
00240         <span class="keywordtype">bool</span> skipTag(<span class="keywordtype">bool</span> print_name, <span class="keywordtype">char</span> * name = NULL);
00241         
<a name="l00243"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo0">00243</a>         <span class="keywordtype">int</span> file;
<a name="l00245"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo1">00245</a>         FILE * File;
00247         <span class="keyword">const</span> <span class="keywordtype">char</span> * get_filename() <span class="keyword">const</span>;
<a name="l00249"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo2">00249</a>         <span class="keywordtype">char</span> word[TAG_WORD_SIZE]; 
<a name="l00251"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo3">00251</a>         <span class="keywordtype">int</span> mode;
00252 
<a name="l00254"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo4">00254</a>         <span class="keywordtype">char</span> zero;
00255 
<a name="l00257"></a><a class="code" href="classsurfit_1_1datafile.html#surfit_1_1datafileo5">00257</a>         <span class="keywordtype">char</span> * datafile_filename;
00258 
00259 };
00260 
00261 }; <span class="comment">// namespace surfit;</span>
00262 
00263 <span class="preprocessor">#endif</span>
00264 <span class="preprocessor"></span>
</pre></div><P align="center">
<BR>
<TT>surfit-1.0.0pre</TT>
<BR>
</P>

