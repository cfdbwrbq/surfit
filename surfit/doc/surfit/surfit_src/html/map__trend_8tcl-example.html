<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
<title>surfit documentation</title>
<link href="surfit.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>map_trend.tcl</h1>This example shows how one goes from randomly spaced data points to an evenly sampled surface with taking trend surface (from binary ROFF file <code>surfit/examples/ftest/func.func</code>) and one fault line into account. In this sample we have 7 scattered data points to interpolate (file <code>surfit/examples/test/7points.txt</code>) and 1 fault line (file <code>surfit/examples/test/1fault.txt</code>). The main idea of taking trend surface into account is that the resulting surface should repeat trend surface in the areas out of scattered data points. The domain consistency of resulting surface should be broken trough the fault line.<p>
On the picture you can see the result of CMOFS gridding algorithm. Interpolation data points showed with green dots, fault line with white line. Trend surface is under result surface.<p>
<div align="center">
<img src="../../../gallery/maps/map_trend.gif" alt="map_trend.gif" alt="surfit logo" border="0">
</div>
<p>
This is how it is done (file <code>"surfit/examples/test/map_trend.tcl"</code>) and some comments to script: <ul>
<li><a class="el" href="group__surfit__variables.html#ga8">map_name</a> variable used to set name of resulting surface </li>
<li>we use <a class="el" href="group__surfit__variables.html#ga1">tol</a> variable to manage tolerance of iterative linear system solver algorithm. If this value is too big, iterative algorithm will make low number of iterations. It leads to rought result. </li>
<li><a class="el" href="group__tcl__grid__save__load.html#ga2">grid_unload</a> function call to remove grid from result file.</li>
</ul>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#</span>
<span class="preprocessor"></span>load libsurfit[info sharedlibextension]

<span class="preprocessor"># resulting surface must have name "map_trend"</span>
<span class="preprocessor"></span>set <a class="code" href="group__surfit__variables.html#ga8">map_name</a> map_trend

<span class="preprocessor"># reading scattered data points from 3-column text file</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__task__save__load.html#ga1">task_read</a> 7points.txt 7points

<span class="preprocessor"># reading fault line from 2-column text file</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__flt__save__load.html#ga0">flt_read</a> 1fault.txt 1fault

<span class="preprocessor"># reading surfit_func from binary ROFF file</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__func__save__load.html#ga0">func_load</a> func.func

<span class="preprocessor"># converting surfit_func to surfit_trend</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__func__conv.html#ga3">func_to_trend</a> 1 2

<span class="preprocessor"># setting surface behaviour between scattered data points</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__completer.html#ga0">completer_set</a> 2 1

<span class="preprocessor"># constructing surfit_grid</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__grid__create.html#ga2">grid_get</a> -10 10 0.2 -10 10 0.4

# running CMOFS algorithm
<a class="code" href="group__tcl.html#ga2">solve</a>

<span class="preprocessor"># unloading surfit_grid from memory</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__grid__save__load.html#ga2">grid_unload</a>

<span class="preprocessor"># saving results to binary ROFF file</span>
<span class="preprocessor"></span><a class="code" href="group__tcl__file.html#ga2">file_save</a> map_trend.dat
</pre></div> <P align="center">
<BR>
<TT>surfit-1.0.0pre</TT>
<BR>
</P>

